

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Background &mdash; GeomAttribute  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="QGIS Data Provider Data Parsing Problems" href="QGISproblems.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GeomAttribute
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="pluginTools/index.html">Tools Included With This Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="preamble.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Background</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#relational-datasets">Relational Datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#geospatial-dataset">Geospatial Dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#geometry-data-types">Geometry Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#geometry-data-values">Geometry Data Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#empty">Empty</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#datasets-with-multiple-geometry-sets">Datasets With Multiple Geometry Sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-operations-in-microsoft-sql-or-postgis-produce-empty-geometry-values">Set Operations in Microsoft SQL or PostGIS Produce Empty Geometry Values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#null">null</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-joins-to-eliminate-null">Using Joins to Eliminate null</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reasons-for-preventing-null-geometries">Reasons For Preventing null Geometries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reasons-for-allowing-null-geometries">Reasons For Allowing null Geometries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#qgis">QGIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#qgis-data-providers">QGIS Data Providers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gis-professional-awareness">GIS Professional Awareness</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exposing-null-or-empty-geometry-values-in-qgis">Exposing null or Empty Geometry Values in QGIS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="QGISproblems.html">QGIS Data Provider Data Parsing Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Aims.html">Aim</a></li>
<li class="toctree-l1"><a class="reference internal" href="pluginDesign.html">Plugin Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeomAttribute</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Background</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/background.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="background">
<span id="concept-page"></span><h1>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h1>
<p>The concepts of relational datasets in general, and, of geospatial data values and data types are introduced.  An emphasis is placed on <em>empty</em> and <em>null</em> geospatial data values.  QGIS software is also introduced.  Specific QGIS problems that are associated with geospatial data values and data types are kept within the <a class="reference internal" href="QGISproblems.html#qgis-data-provider-data-parsing-problems"><span class="std std-ref">QGIS Data Provider Data Parsing Problems</span></a> section.</p>
<div class="section" id="relational-datasets">
<h2>Relational Datasets<a class="headerlink" href="#relational-datasets" title="Permalink to this headline">¶</a></h2>
<p>A <em>set</em> is a collection of distinct objects.  For example, a box of apples is a <em>set</em> of apples, and, the <em>set</em> of countries in North America contains: Canada;  United States of America; and, Mexico.  By convention, sets are symbolized by enclosing within curly brackets.  Hence:</p>
<div class="math notranslate nohighlight">
\[North\ American\ Countries = \{Canada, United\ States\ of\ America, Mexico\}\]</div>
<p>A dataset is any set where each element is restricted to one data type <em>and</em> where each element belongs to the same universal set.</p>
<p>A relational dataset is a collection of sets where:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The number of objects (elements) in each set is the same; and,</li>
<li>A one to one relationship exists between elements of different sets.</li>
</ol>
</div></blockquote>
<p>An example relational dataset showing the Country Name, Country Abbreviation and Country Population for the countries in North America is shown in <a class="reference internal" href="#tablena-simple"><span class="std std-numref">Table 3</span></a>.  This relational dataset comprises of the three sets: country names; country name abbreviations; and, country populations.  A one to one relationship exists between the elements for each of these three sets.  Hence, the country with the name of <em>Canada</em> has a one to one relationship with the country abbreviation <em>CAN</em> and the country population <em>3563000</em>.  The combination of the relationship and the set values for a specific country is represented as a row in a table that is referred to as a <em>record</em>.</p>
<span id="tablena-simple"></span><table border="1" class="colwidths-auto docutils align-center" id="id28">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">Example of a North America Countries dataset.</span><a class="headerlink" href="#id28" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line-block">
<div class="line">Country Name</div>
</div>
<div class="line">(letters and spaces)</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Abbreviation</div>
<div class="line">(3 upper case letters)</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Population</div>
<div class="line">(integer)</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Canada</td>
<td>CAN</td>
<td>3563000</td>
</tr>
<tr class="row-odd"><td>United States of America</td>
<td>USA</td>
<td>32663000</td>
</tr>
<tr class="row-even"><td>Mexico</td>
<td>MEX</td>
<td>12458000</td>
</tr>
</tbody>
</table>
<p>Essential to any set is a definition or description of what type of objects can be a member.  For example, an apple which is a valid type of the set of fruit can’t be a member of a set of countries.  For any dataset, both the data type and additional constraints are often used together to define the universal set.  For example, the data type for <em>Country Name</em> in <a class="reference internal" href="#tablena-simple"><span class="std std-numref">Table 3</span></a> is any combination of letters and spaces, whilst the data type for <em>Abbreviation</em> is any combination of 3 upper case letters.</p>
<p>Although a <em>relational dataset</em> consists of <em>multiple sets</em> of data where the elements of each set are related, it is ubiquitously referred to as a <strong>dataset</strong>.</p>
<div class="section" id="geospatial-dataset">
<h3>Geospatial Dataset<a class="headerlink" href="#geospatial-dataset" title="Permalink to this headline">¶</a></h3>
<p>A geospatial dataset refers to any dataset where one or more of the composite sets refer to a location on the earth’s surface.  This project scope is restricted to those geospatial datasets where the location on the earth’s surface is represented by one or more points, lines or polygons that are located by vertices (coordinates) and stored as vectors.  These points, lines and polygons are collectively referred to as shapes or <em>geometries</em> <a class="footnote-reference" href="#f5" id="id1">[3]</a>.  Datasets that include one or more sets of geospatial vectors are referred to as <em>Vector Datasets</em> by the GIS community.  A vector geospatial dataset is a subtype of geospatial dataset where the geospatial sets can be located graphically on the earths surface by the application of coordinates.</p>
</div>
</div>
<div class="section" id="geometry-data-types">
<h2>Geometry Data Types<a class="headerlink" href="#geometry-data-types" title="Permalink to this headline">¶</a></h2>
<p>All datasets contain some restriction on the type of data each constituent set may contain.  From a software perspective, a restriction of type is essential for minimizing both the storage size of the dataset and the response time for a dataset query.  Analagous to specific data types for storage of numbers, text or dates there are data types specifically used for the storage of geospatial geometries <a class="reference internal" href="changelog.html#iso19125-2" id="id2">[5]</a>.  Similarly, just as there can be specific data types for numbers including signed and unsigned integers, float, and, decimal numbers, there are also specific data types for different types of geometries, with the type often referring to how the geometry is constructed.</p>
<p>For any data source the geometry data types that are availabe for use can be shown schematically as a hierarchy like the one shown in <a class="reference internal" href="#figuregeomtypei"><span class="std std-numref">Fig. 3</span></a>.  Within this hierarchy, the possible data types are described by the labels in the boxes.  Essential to all such hierarchy’s, a set of data of a declared type may consist of any type below it on the hierarchy.  Hence for the hierarchy shown, if a set of data has a declared type of <em>Geometry Collection</em> then any data element within it may consist of <em>Geometry Collection</em>, <em>Multi-Point</em>, <em>Multi-Curve</em>, <em>Multi-Line</em>, <em>Multi-Surface</em>, and, <em>Multi-Polygon</em>.  Similarly, if a set of data has a declared type of <em>Point</em> than it may not contain a <em>Polygon</em> nor a <em>Line</em> as neither are below the sub-type <em>Point</em> on the hierarchy.</p>
<p>The single part constrained geometry subtypes in the lower part of <a class="reference internal" href="#figuregeomtypei"><span class="std std-numref">Fig. 3</span></a> are referred to as <em>Primitive Types</em> and must contain only one single part geometry per set element.  In contrast, the <em>Multiple Parts</em> geometries may consist of one <em>or</em> many parts per feature.  For example, a feature of the <em>“Multi-Point”</em> geometry sub type may have one point, no points or multiple points. Another characteristic of the single part primitive types is that the <em>Line</em> and <em>Polygon</em> subtypes may only exist of straight line segments between coordinates.</p>
<div class="figure align-center" id="id29">
<span id="figuregeomtypei"></span><a class="reference internal image-reference" href="_images/geomTypeSQL.png"><img alt="_images/geomTypeSQL.png" src="_images/geomTypeSQL.png" style="width: 520.8px; height: 378.7px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3 </span><span class="caption-text">GIS Geometry subtype hierarchy.  Adapted from <a class="reference internal" href="changelog.html#iso19125-2" id="id3">[5]</a>.  The more conventional term <em>“LineString”</em> that is used in the QGIS API and <a class="reference internal" href="changelog.html#iso19125-2" id="id4">[5]</a> is replaced here with <em>“Line”</em> for clarity.</span></p>
</div>
<p>In reality there may be many more geometry subtypes than the simplified hierarchy shown in <a class="reference internal" href="#figuregeomtypei"><span class="std std-numref">Fig. 3</span></a>.  For example, some common additional subtypes for datasets are created for sets of geometries that incorporate elevation, or, for lines that are constructed from curves as opposed to straight line segments.  In another variation, some geometry hierarchy’s including Microsoft SQL server and QGIS don’t isolate primitive geometry sub-types from non-primitive sub-types.</p>
<p>Many GIS data source standards, and, many GIS software have a geometry subtype hierarchy that is <strong>similar</strong> with <a class="reference internal" href="#figuregeomtypei"><span class="std std-numref">Fig. 3</span></a>, including the <a class="reference external" href="https://qgis.org/api/classQgsAbstractGeometry.html">inheritance diagram for QGIS’s QgsAbstractGeometry</a> <a class="reference internal" href="changelog.html#qgsabstractgeometry" id="id5">[12]</a>.</p>
</div>
<div class="section" id="geometry-data-values">
<h2>Geometry Data Values<a class="headerlink" href="#geometry-data-values" title="Permalink to this headline">¶</a></h2>
<p>For any data type there exists a universal set of valid values.  For example, a set of birthday dates must be restricted to valid dates.  Hence, a birthday on the 30th of February is not valid as the 30th of February is not part of the universal set of dates.  Similarly, a valid geometry should be located within the boundaries of the coordinate system that it is referenced to.  <strong>Empty</strong> and <strong>null</strong> are two values that may be part of many sets of data and for geometry data values could be fairly described as being:</p>
<ol class="arabic simple">
<li>controversial;</li>
<li>miss-understood; and,</li>
<li>best avoided.</li>
</ol>
<div class="section" id="empty">
<span id="emptyanchor"></span><h3>Empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<p>A box of apples can be described as a set of apples.  An <em>empty</em> Apple box represents an <em>empty</em> set of apples.  An <em>empty</em> geometry element is a geometry that has no coordinates.  Whether an <em>empty</em> element is a valid member of a set depends on the context.  For example, if a study of chickens hatching from eggs recorded the date that each chicken hatches for a set of 10 eggs, than the hatch date element for each egg is <em>empty</em> before the chicken hatches.  It is <em>known</em> that the chicken has not hatched.</p>
<p>All <em>empty</em> set values including an <em>empty</em> geometry data value are place holders for when it is <em>known</em> that an element does not exist <a class="reference internal" href="changelog.html#ogc2010" id="id6">[21]</a>.  For example, consider the intersection <a class="reference internal" href="changelog.html#intersectdefinition" id="id7">[10]</a> of the <em>Blue Crosses</em> and the <em>Red Circles</em> with the two squares shown in <a class="reference internal" href="#figuresquarepoint"><span class="std std-numref">Fig. 4</span></a>.  Both of the <em>Blue Crosses B1</em> and <em>B2</em> intersect the <em>Left square</em>, and, the <em>Blue Cross B3</em> intersects the <em>Right square</em>.  The intersections of the <em>Squares</em> and <em>Blue Crosses</em>, and the <em>Squares</em> with <em>Red Circles</em> are summarized by the datasets shown in <a class="reference internal" href="#tableiiia"><span class="std std-numref">Table 4</span></a> and <a class="reference internal" href="#tableiiib"><span class="std std-numref">Table 5</span></a>.  As shown in  <a class="reference internal" href="#tableiiia"><span class="std std-numref">Table 4</span></a> the <em>Left Square</em> intersects with the <em>Blue Crosses</em> <em>B1</em> and <em>B2</em> as represented by the subset <em>{B1, B2}</em>.  Similarly, it is reported in <a class="reference internal" href="#tableiiib"><span class="std std-numref">Table 5</span></a> that the <em>Left square</em> intersects the subset of <em>Red Circles</em> <em>{R1}</em>.  In contrast, also in <a class="reference internal" href="#tableiiib"><span class="std std-numref">Table 5</span></a> it is shown that the <em>Left square</em> does not intersect with any <em>Red Circles</em> as shown by the <em>empty</em> set <em>{ }</em>.  Here the <em>empty</em> set <em>{ }</em> shows that it is known that no intersection occurs.  The reporting of those combinations where intersections are known to not occur as shown in <a class="reference internal" href="#tableiiib"><span class="std std-numref">Table 5</span></a> follows the convention used by most SQL type relational databases for all set intersections regardless of whether they are geospatial or not.  In contrast, the convention for many GIS desktop software including QGIS and ArcGIS is to only show those combinations where intersections are known to occur (are <em>True</em>).  <a class="reference internal" href="#tableiiic"><span class="std std-numref">Table 6</span></a> follows the geospatial intersection convention of QGIS and shows only those combinations in <a class="reference internal" href="#tableiiib"><span class="std std-numref">Table 5</span></a> that do intersect.  Analyzing those sets that don’t intersect (<em>empty</em> sets) can be insightful for data workflow problem solving .</p>
<div class="figure align-center" id="id30">
<span id="figuresquarepoint"></span><a class="reference internal image-reference" href="_images/squaresAndPoints.png"><img alt="_images/squaresAndPoints.png" src="_images/squaresAndPoints.png" style="width: 358.0px; height: 198.5px;" /></a>
<p class="caption"><span class="caption-number">Fig. 4 </span><span class="caption-text">The location of <em>Blue Crosses</em> and <em>Red Circles</em> in the “Left Square” and the “Right Square”.</span></p>
</div>
<span id="tableiiia"></span><table border="1" class="colwidths-auto docutils align-center" id="id31">
<caption><span class="caption-number">Table 4 </span><span class="caption-text">The intersection of the <em>Squares</em> and the <em>Blue Crosses</em>.</span><a class="headerlink" href="#id31" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Square</th>
<th class="head">Blue Crosses</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Left square</td>
<td>{B1, B2}</td>
</tr>
<tr class="row-odd"><td>Right square</td>
<td>{B3}</td>
</tr>
</tbody>
</table>
<span id="tableiiib"></span><table border="1" class="colwidths-auto docutils align-center" id="id32">
<caption><span class="caption-number">Table 5 </span><span class="caption-text">The intersection of the <em>Squares</em> and the <em>Red Circles</em>.</span><a class="headerlink" href="#id32" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Square</th>
<th class="head">Red Circles</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Left square</td>
<td>{R1}</td>
</tr>
<tr class="row-odd"><td>Right square</td>
<td>{  }</td>
</tr>
</tbody>
</table>
<span id="tableiiic"></span><table border="1" class="colwidths-auto docutils align-center" id="id33">
<caption><span class="caption-number">Table 6 </span><span class="caption-text">The intersection of the <em>Squares</em> and the <em>Red Circles</em> where the intersection is <em>True</em>.</span><a class="headerlink" href="#id33" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Square</th>
<th class="head">Red Circles</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Left square</td>
<td>{R1}</td>
</tr>
</tbody>
</table>
<p>The real utility of <em>empty</em> geometry values is realised when the intersection of all the squares and both types of points (<em>Red Circles</em> and <em>Blue Crosses</em>) are collated in one dataset as shown in <a class="reference internal" href="#tableiii"><span class="std std-numref">Table 7</span></a> as opposed to <a class="reference internal" href="#tableiiid"><span class="std std-numref">Table 8</span></a>.  By using the <em>empty</em> set <em>{ }</em> as a place holder for the known non-intersection of <em>Red Circles</em> with the <em>Right square</em> the sets of <em>Blue Crosses</em> and <em>Red Circles</em> are maintained as separate columns in <a class="reference internal" href="#tableiii"><span class="std std-numref">Table 7</span></a>.  Although this approach is efficient and intuitive it is not suitable when there are a large number of point types as the number of columns has a linear relationship to the number of point types.</p>
<span id="tableiii"></span><table border="1" class="colwidths-auto docutils align-center" id="id34">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">The intersection of each point type set and the set of squares.  Note that the point type sets are maintained as separate sets (columns).</span><a class="headerlink" href="#id34" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head" rowspan="2">Square</th>
<th class="head" colspan="2">Point type</th>
</tr>
<tr class="row-even"><th class="head">Blue Crosses</th>
<th class="head">Red Circles</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>Left square</td>
<td>{B1, B2}</td>
<td>{R1}</td>
</tr>
<tr class="row-even"><td>Right square</td>
<td>{B3}</td>
<td>{ }</td>
</tr>
</tbody>
</table>
<span id="tableiiid"></span><table border="1" class="colwidths-auto docutils align-center" id="id35">
<caption><span class="caption-number">Table 8 </span><span class="caption-text">The intersection of all point types and the squares with one combined set of point types, and, where the intersection is <em>True</em>.</span><a class="headerlink" href="#id35" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Square</th>
<th class="head">Point type</th>
<th class="head">Geometry</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Left square</td>
<td>Blue Crosses</td>
<td>{B1, B2}</td>
</tr>
<tr class="row-odd"><td>Right square</td>
<td>Blue Crosses</td>
<td>{B3}</td>
</tr>
<tr class="row-even"><td>Left square</td>
<td>Red Circles</td>
<td>{R1}</td>
</tr>
</tbody>
</table>
<div class="section" id="datasets-with-multiple-geometry-sets">
<h4>Datasets With Multiple Geometry Sets<a class="headerlink" href="#datasets-with-multiple-geometry-sets" title="Permalink to this headline">¶</a></h4>
<p>Much of the GIS community work with the restriction of a single geometry set per dataset (a single geometry column within a table).  It is difficult to have multiple geometry attributes without also allowing <em>empty</em> geometry values.  Next, I will examine the advantages and disadvantages of multiple geometry attributes.</p>
<p>The fundamental advantage of multiple geometry attributes is they facilitate topology. Topology refers to how the constituent parts of a system are interrelated or arranged.  The location of points within squares shown schematically in <a class="reference internal" href="#figuresquarepoint"><span class="std std-numref">Fig. 4</span></a> is an example of topology as it shows how the points are related to the squares.  <a class="reference internal" href="#tableiii"><span class="std std-numref">Table 7</span></a> shows the topological association of point type by square type, but, uses two geometry columns to do so.  <a class="reference internal" href="#tableiiid"><span class="std std-numref">Table 8</span></a> shows all of the True intersections shown in <a class="reference internal" href="#tableiii"><span class="std std-numref">Table 7</span></a> using only one geometry column.  Examination of <a class="reference internal" href="#tableiiid"><span class="std std-numref">Table 8</span></a> reveals that the relationship between a type of point (e.g. Blue Crosses) and the Square type (e.g. Left Square or Right Square) has to be reported as two separate relationships (two separate records) and a user is left with the task of mentally associating these two relationships.  Clearly, without using multiple geometry columns establishing topological relationships is less intuitive.</p>
<p>A major disadvantage of multiple geometry columns is that they are not supported by many GIS software or GIS data sources.  For example, ArcGIS does not support multiple geometry columns in any capacity, QGIS treats each geometry column as an unrelated dataset, and, the ubiquitous shapefile can only contain one geometry column.  So, by adopting multiple geometry columns a user potentially isolates themself from a significant portion of the GIS community.</p>
</div>
<div class="section" id="set-operations-in-microsoft-sql-or-postgis-produce-empty-geometry-values">
<h4>Set Operations in Microsoft SQL or PostGIS Produce Empty Geometry Values<a class="headerlink" href="#set-operations-in-microsoft-sql-or-postgis-produce-empty-geometry-values" title="Permalink to this headline">¶</a></h4>
<p>There are several fundamental set operations that are used to construct new sets from existing sets regardless to what it is a set of <a class="reference internal" href="changelog.html#settheoryoverall" id="id8">[17]</a>.  Within a database, it is ideal if a set operation is consistent for all data types, regardless of whether they are geospatial or not.  As introduced in the section <a class="reference internal" href="#empty"><span class="std std-ref">Empty</span></a> some databases generate <em>empty</em> geometry values for intersection set operations.  Other universal set operations include Union and Except.  Microsoft SQL Server and PostGis are examples of databases that can generate <em>empty</em> geometry values for set operations.  Both of these databases were developed from SQL conventions and their generation of <em>empty</em> values for geometries is consistent with set operations for other data types.</p>
<p>Consider the intersection of the points <em>Pt1</em> and <em>Pt2</em> with the circle shown in <a class="reference internal" href="#figurevi"><span class="std std-numref">Fig. 5</span></a> which is an example of an intersection between two geometry datasets.  ‘Pt1’ lies within the <em>circle</em>, and, hence intersects the <em>circle</em>.  <em>Pt2</em> lies outside the <em>circle</em> and does not intersect it.  In both QGIS v3.x and ArcGIS desktop, the intersection of a points dataset containing <em>{Pt1, Pt2}</em> and a dataset containing the <em>circle</em> will return only those records that intersect, hence, only <em>Pt1</em> is returned.  In contrast, with Microsoft SQL Server, the intersection returns both the records that do and don’t intersect with a dataset containing both <em>Pt1</em> and <em>Pt2</em>.</p>
<div class="figure align-center" id="id36">
<span id="figurevi"></span><a class="reference internal image-reference" href="_images/FigureV.png"><img alt="_images/FigureV.png" src="_images/FigureV.png" style="width: 292.5px; height: 182.5px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5 </span><span class="caption-text">A schematic of the intersection of points <em>Pt1</em> and <em>Pt2</em> with the <em>circle</em>.</span></p>
</div>
<p>There is no error with either of the different approaches to intersection taken by QGIS 3.x and Microsoft SQL Server.  QGIS 3.x includes the selection logic step that removes those records that don’t intersect.  For <em>Pt2</em>, Microsoft SQL server is returning an <em>empty</em> geometry confirming that no intersection exists, as shown by the following Transact-SQL script <a class="footnote-reference" href="#f2" id="id9">[2]</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DECLARE</span> <span class="nd">@circle</span> <span class="n">geometry</span> <span class="o">=</span> <span class="s1">&#39;CURVEPOLYGON (CIRCULARSTRING (0 1, 1 2, 2 1, 1 0, 0 1))&#39;</span><span class="p">;</span>
<span class="n">DECLARE</span> <span class="nd">@Pt2</span> <span class="n">geometry</span> <span class="o">=</span> <span class="s1">&#39;POINT (3 1)&#39;</span><span class="p">;</span>
<span class="n">SELECT</span> <span class="nd">@Pt2</span><span class="o">.</span><span class="n">STIntersection</span><span class="p">(</span><span class="nd">@circle</span><span class="p">)</span><span class="o">.</span><span class="n">ToString</span><span class="p">();</span>
<span class="n">GEOMETRYCOLLECTION</span> <span class="n">EMPTY</span>
</pre></div>
</div>
<p>This intersection example shows the ease with which one can inadvertently generate <em>empty</em> geometry values in Microsoft SQL Server, and, these <em>empty</em> geometry values will be parsed to QGIS.</p>
</div>
</div>
<div class="section" id="null">
<h3>null<a class="headerlink" href="#null" title="Permalink to this headline">¶</a></h3>
<p><strong>null</strong> is the most common value (element) recorded by many disciplines and data sources for <em>unknown</em> data values <a class="footnote-reference" href="#f6" id="id10">[4]</a>.  For example, if a study of chickens hatching from eggs recorded the hatch date of each chicken hatching for a set of eggs, then for a specific egg the hatch date value is <em>null</em> (unknown) if the hatch date was not recorded, but, the chicken has hatched.  Strictly speaking a <em>null</em> hatch date can be any value from the universal set of hatch dates including <em>Empty</em> allowing for eggs that never hatched.</p>
<p>The most useful feature of <em>null</em> values is that they enable incomplete datasets.  For example, consider the <em>Blue Crosses</em> dataset shown in <a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> where the coordinates for <em>B4</em> are unknown. Datasets like <a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> can stem from requests to georeference existing datasets where the georeferencing is incomplete.</p>
<span id="tableiiie"></span><table border="1" class="colwidths-auto docutils align-center" id="id37">
<caption><span class="caption-number">Table 9 </span><span class="caption-text">The age, size and coordinates for Blue Crosses.</span><a class="headerlink" href="#id37" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Blue Cross</th>
<th class="head">Age (years)</th>
<th class="head">Size</th>
<th class="head">Coordinates</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>B1</td>
<td>2</td>
<td>Big</td>
<td>{1, 1}</td>
</tr>
<tr class="row-odd"><td>B2</td>
<td>2</td>
<td>Small</td>
<td>{2, 2}</td>
</tr>
<tr class="row-even"><td>B3</td>
<td>3</td>
<td>Small</td>
<td>{4, 2}</td>
</tr>
<tr class="row-odd"><td>B4</td>
<td>8</td>
<td>Big</td>
<td><em>null</em></td>
</tr>
</tbody>
</table>
<div class="section" id="using-joins-to-eliminate-null">
<h4>Using Joins to Eliminate null<a class="headerlink" href="#using-joins-to-eliminate-null" title="Permalink to this headline">¶</a></h4>
<p>Many GIS datasets do not allow <em>null</em> geometries.  Having a dataset constraint that prevents <em>null</em> geometries does not imply that all geometries are known, it only means that the dataset can’t have a <em>null</em> geometry data value.  The prevention of <em>null</em> geometries without knowing all of the geometries is achieved by using multiple datasets that include a geometry only dataset that has a relationship with a non-geometry dataset as shown in <a class="reference internal" href="#figurejoinedcrosses"><span class="std std-numref">Fig. 6</span></a>.  The relationship is typically achieved by the use of a unique value <em>key</em> that is used in all related datasets to distinguish each relationship across the datasets.  <em>Joins</em> refer to the process of forming a new dataset from multiple datasets by the use of a relationship.  The dataset shown in <a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> can be created from the datasets shown in <a class="reference internal" href="#figurejoinedcrosses"><span class="std std-numref">Fig. 6</span></a> by application of an <em>outer join</em>.</p>
<div class="figure align-center" id="id38">
<span id="figurejoinedcrosses"></span><a class="reference internal image-reference" href="_images/CrossesWithoutNull.png"><img alt="_images/CrossesWithoutNull.png" src="_images/CrossesWithoutNull.png" style="width: 471.79999999999995px; height: 170.79999999999998px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text"><a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> presented as two separate datasets where <em>null</em> <em>Coordinates</em> data values are not permitted in the geospatial dataset.  The <em>Blue Cross</em> keys are used to register relationships symbolised by the grey dashed lines between specific records in the two datasets.</span></p>
</div>
<p>The use of a geospatial specific dataset with a key like that shown in <a class="reference internal" href="#figurejoinedcrosses"><span class="std std-numref">Fig. 6</span></a> enables geometry to be a variable.  For example, take the Blue Cross <em>B1</em>.  This Blue Cross may represent a boat at sea.  Hence, at different points in time, <em>B1</em> may have different coordinates (<a class="reference internal" href="#tableiiif"><span class="std std-numref">Table 10</span></a>).  Most geospatial datasets have geometries that are variable as our technology for recording and referencing location is improving.  For example, an allotment of land may be static as it is relative to reference points, but, the mapped location and hence the recorded geometry for the allotment of land will change as the location of the reference points is refined to a higher accuracy.  Whether a dataset owner should track changes to a geometry is a dataset specific question.</p>
<span id="tableiiif"></span><table border="1" class="colwidths-auto docutils align-center" id="id39">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">The coordinates of the Blue Crosses for yesterday and today.</span><a class="headerlink" href="#id39" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head" rowspan="2">Blue Cross</th>
<th class="head" colspan="2">Coordinates</th>
</tr>
<tr class="row-even"><th class="head">Yesterday</th>
<th class="head">Today</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>B1</td>
<td>{1, 1}</td>
<td>{2, 2}</td>
</tr>
<tr class="row-even"><td>B2</td>
<td>{2, 2}</td>
<td>{1, 2}</td>
</tr>
<tr class="row-odd"><td>B3</td>
<td>{4, 2}</td>
<td>{4, 1}</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reasons-for-preventing-null-geometries">
<h4>Reasons For Preventing null Geometries<a class="headerlink" href="#reasons-for-preventing-null-geometries" title="Permalink to this headline">¶</a></h4>
<p>The reasons for preventing <em>null</em> geometries include: GIS feature creation is simpler without <em>null</em> geometries; <em>null</em> geometries can’t be mapped; and, Boolean logic can’t be applied to <em>null</em> values.</p>
<p>For QGIS and many desktop GIS systems, records are created by drawing the geometry and subsequently entering the record’s other data values.  This geospatial geometry centered approach intuitively keeps the related computer programming simple in comparison to any approach that allows a user to enter any of the data values including the geometry in the sequence that they choose.</p>
<p>There is no accepted universal approach to mapping a <em>null</em> geometry.  It is obvious that if a geometry is <em>null</em> then using a defined symbol at a single location is a miss-representation.  There is active research into approaches for mapping the unknown <a class="reference internal" href="changelog.html#robinson2018" id="id11">[23]</a>.</p>
<p>Whether a dataset permits <em>null</em> values directly affects the type of logic applied to the dataset for set operations.  <em>Boolean</em> logic, also referred to as two value logic, allows only for <em>True</em> or <em>False</em> answers to set operations.  <em>Boolean</em> logic can’t be applied when the answer is unknown.  When <em>null</em> values are permitted, <em>Three Value</em> logic is required for set operations.  The intersection of the squares with the two subsets of <em>Blue Crosses {B1, B2, B3}</em> and <em>{B1, B2, B3, B4}</em> that are described in <a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> is shown in <a class="reference internal" href="#tableiiig"><span class="std std-numref">Table 11</span></a>.  For <em>{B1, B2}</em> it is <em>True</em> that they intersect the <em>Left square</em>, whilst it is also <em>True</em> that <em>B3</em> does not intersect the same square, however, it is <em>null</em> (unknown) whether <em>B4</em> intersects the <em>Left Square</em>.  Compounding the implementation of <em>Three Value</em> logic is the fact that different database sources have different implementations of it differently leading to it’s widespread avoidance.  The different implementations of <em>Three Value</em> is not specific to geometry data values and is a problem for all data value types including generic types like integer or date <a class="reference internal" href="changelog.html#imielinski1984" id="id12">[19]</a><a class="reference internal" href="changelog.html#vandermeyden1998" id="id13">[25]</a>.  In summary, even when <em>null</em> values are permitted in datasets, the records associated with them are typically excluded from set operations.</p>
<span id="tableiiig"></span><table border="1" class="colwidths-auto docutils align-center" id="id40">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">The intersection of the squares with the set <em>{B1, B2, B3, B4}</em> as shown in <a class="reference internal" href="#tableiiie"><span class="std std-numref">Table 9</span></a> using different types of logic.</span><a class="headerlink" href="#id40" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head" rowspan="2">Logic</th>
<th class="head" rowspan="2">Test</th>
<th class="head" colspan="2">Square</th>
</tr>
<tr class="row-even"><th class="head">Left</th>
<th class="head">Right</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">Boolean</td>
<td>True</td>
<td>{B1, B2}</td>
<td>{B3}</td>
</tr>
<tr class="row-even"><td>False</td>
<td>{B3}</td>
<td>{B1, B2}</td>
</tr>
<tr class="row-odd"><td rowspan="3">Three Value</td>
<td>True</td>
<td>{B1, B2}</td>
<td>{B3}</td>
</tr>
<tr class="row-even"><td>False</td>
<td>{B3}</td>
<td>{B1, B2}</td>
</tr>
<tr class="row-odd"><td>Unknown</td>
<td>{B4}</td>
<td>{B4}</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reasons-for-allowing-null-geometries">
<h4>Reasons For Allowing null Geometries<a class="headerlink" href="#reasons-for-allowing-null-geometries" title="Permalink to this headline">¶</a></h4>
<p>Although the majority of GIS systems do not promote the use of <em>null</em> geometry data values, there are several reasons supporting their adoption: they assist the adoption of geospatial datasets by enterprise databases; they illuminate the unknown; they facilitate a simpler dataset structure; and, many GIS systems allow <em>null</em> for other sets.</p>
<p>Facilitating the adoption of geospatial datasets by enterprise databases is a compelling reason to employ <em>null</em> geometry values.  For example, consider a commercial database used for land rates (also known as land taxes)  at a local government office.  The current approach of many rates databases is to mimic <a class="reference internal" href="#figurejoinedcrosses"><span class="std std-numref">Fig. 6</span></a> where the tables for the land registry are maintained within a non-spatial land registry database, and, the tables for the georeferenced land allotments are in a GIS database with the databases being joined.  This approach facilitates bureaucracies where separate teams of people maintain each database, and, where the land registry database does not adopt spatial functionality as the data is located in a separate database.  Whilst using a separate GIS database allows the local government office freedom to acquire practically any common GIS system, it comes at a cost of minimal inbuilt spatial capability in the non-spatial land registry software.</p>
<p>Allowing <em>null</em> has the potential to expose the unknown.  By exposing the unknown, it it is evident where further data capture is required, and, it is more likely that any spatial analysis will also establish the degree of dataset completeness.</p>
<p>A disadvantage of the lookup table approach is the required maintenance of lookup keys and database schema that are essential for performing database queries that include spatial and non-spatial attributes.  Without lookup tables the database structure is simpler leading to fewer errors and fewer joins when constructing queries.</p>
<p>Many GIS systems allow <em>null</em> values for non-geometry sets (for example <em>null</em> values for age in an asset dataset), but, disallow them for a geometry set within the same dataset.  Excluding <em>null</em> from sets that are not unique keys on a piecemeal basis can cause confusion.  The rational for using <em>null</em> values should be consistent for all non-key sets within a dataset, and, within a database.</p>
</div>
</div>
</div>
<div class="section" id="qgis">
<h2>QGIS<a class="headerlink" href="#qgis" title="Permalink to this headline">¶</a></h2>
<p>QGIS is self-promoted as an “Open Source Geographic Information System” <a class="reference internal" href="changelog.html#qgis" id="id14">[3]</a>.  QGIS is used for creating, manipulating and publishing spatial data sets by many organisations. QGIS was created by Gary Sherman in 2002 <a class="reference internal" href="changelog.html#qgiscontributors" id="id15">[16]</a><a class="reference internal" href="changelog.html#garysherman2011" id="id16">[27]</a>.  In 2007 it became a project of the Open Source Geospatial Foundation with version 1 being released in January 2009 <a class="reference internal" href="changelog.html#qgiscontributors" id="id17">[16]</a>.  The version of QGIS used in this project, Version 3, was released in February 2018 <a class="reference internal" href="changelog.html#qgiscontributors" id="id18">[16]</a>.  Version 2 of QGIS employed Python 2 for scripting and PyQT4 for the Graphical User Interface (GUI).  Version 3 of QGIS employs Python 3 for scripting and PyQT5 for the GUI.  QGIS version 3 is self-described as a “huge overhaul and cleanup” of QGIS version 2 <a class="reference internal" href="changelog.html#qgischangelogv3" id="id19">[9]</a>.  Many of the Python scripts configured for version 2 of QGIS no longer work with version 3 with much of the legacy sub-version support dropped.</p>
<p>A feature that distinguishes QGIS from many desktop GIS platforms including MapInfo and ArcMap is that QGIS does not incorporate or associate with a custom data source.  For example, MapInfo is associated with TAB files and ArcMap is associated with file and personal geodatabases.  In contrast to MapInfo or ArcMap, QGIS has a data source provider philosophy which it uses to provide a consistent user interface for a broad range of data sources.</p>
<div class="section" id="qgis-data-providers">
<h3>QGIS Data Providers<a class="headerlink" href="#qgis-data-providers" title="Permalink to this headline">¶</a></h3>
<p>A data provider is a software library that reads, writes, executes commands and queries one or more data sources.  These data sources may be as simple as a text document or spreadsheet, or, complex like a SpatiaLite or PostGis database.  Analysis software packages may have many data providers so that they can access a wide range of data sources.</p>
<p>Each data source has different combinations of data values and data types, and, also different commands that can be executed.  Some data providers service several different data sources, whilst, others service a single data source. For GIS, data providers need to negotiate different collections of geometry sub-types, and, different approaches to <em>null</em> and <em>empty</em> data values.  It is the QGIS data provider’s task to:</p>
<blockquote>
<div><ul class="simple">
<li>provide algorithms to parse data values between external data source sub-types and QGIS sub-types; and,</li>
<li>for some data sources the association of geometry sub-types and it’s parsing is per record, not per dataset.</li>
</ul>
</div></blockquote>
<p>For example, an ESRI Shapefile has only 4 instantiable geometry sub-types and does not permit <em>empty</em> geometry values within it’s specification (<a class="reference internal" href="#figureshapehier"><span class="std std-numref">Fig. 7</span></a>).  In contrast, a Microsoft SQL server spatial database has 10 instantiable geometry sub-types and permits both <em>null</em> and <em>empty</em> geometry values (<a class="reference internal" href="#figuremssqlhier"><span class="std std-numref">Fig. 8</span></a>).  A software package that has providers for both ESRI’s Shapefile and Microsoft SQL server spatial database needs to provide a common user experience that is independent of the provider being used as much as feasible.</p>
<p>A software user may need to be aware of the differing complexity of different data sources and the provider’s which interact with them if the software engaging the provider does not provide warnings or messages when data types and values are changed <em>in situ</em> to provide a smooth and consistent user experience.  Note that for reading data sources, any in-situ data changes are only for presentation or analysis and are not written to the data source.</p>
<div class="figure align-center" id="id41">
<span id="figureshapehier"></span><a class="reference internal image-reference" href="_images/geomTypeShapefile.png"><img alt="_images/geomTypeShapefile.png" src="_images/geomTypeShapefile.png" style="width: 196.7px; height: 196.0px;" /></a>
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">The hierarchy of geometry types for a ESRI shapefile excluding those that include elevation or measurements (adapted from <a class="reference internal" href="changelog.html#shapefiledesc" id="id20">[18]</a>).  The <em>Shape Type</em> geometry type can’t be instantiated directly and is included for consistency.</span></p>
</div>
<div class="figure align-center" id="id42">
<span id="figuremssqlhier"></span><a class="reference internal image-reference" href="_images/geomTypeMSSQL.png"><img alt="_images/geomTypeMSSQL.png" src="_images/geomTypeMSSQL.png" style="width: 567.6999999999999px; height: 532.6999999999999px;" /></a>
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">The hierarchy of geometry types for Microsoft SQL server excluding those that contain elevation or measurements (adapted from <a class="reference internal" href="changelog.html#mssql-types" id="id21">[7]</a>) <a class="footnote-reference" href="#fi" id="id22">[1]</a>.  Types that can be instantiated are in black rectangles.  Types that can’t be instantiated are in red ellipses.</span></p>
</div>
<p>QGIS parses data to and from many data sources.  The algorithms for this data parsing are contained within 18 different data providers.  The data providers are scripted within C++ and are excluded from the QGIS Application Programming Interface (API) <a class="reference internal" href="changelog.html#qgsproviders2018" id="id23">[14]</a>.  To function, the relevant data provider needs to read and write each data type and the appropriate values for each set (column) included in the dataset. The intent of this data parsing is that a user may read, write and analyse data stored in different sources with a common QGIS user interface.</p>
<p>Qgis’s data provider approach allows QGIS to edit, create or analyse geospatial datasets within enterprise databases in their native format.  For example, <a class="reference external" href="http://www.smec.com/en_au/what-we-do/sectors/transport/pavement-management-systems">SMEC Pavement Management Software</a> can be configured to use a Microsoft SQL server database to contain it’s pavement datasets.  By way of a data provider, QGIS can browse and edit the geometries contained within a SMEC pavement dataset without importing or exporting any dataset, and, without creating additional tables in any database.</p>
<p>In comparison to QGIS’s approach of editing the data in it’s native format, ESRI’s ArcMap requires a user to import a dataset into a geodatabase prior to editing, even though the enterprise database and the geodatabase may be using the same database server <a class="reference internal" href="changelog.html#arcgistutorialforempty" id="id24">[15]</a>.  ESRI’s approach often leads to lookup tables being used for geospatial data that are joined to non-spatial datasets.</p>
</div>
</div>
<div class="section" id="gis-professional-awareness">
<h2>GIS Professional Awareness<a class="headerlink" href="#gis-professional-awareness" title="Permalink to this headline">¶</a></h2>
<p>Many GIS professionals are educated and work within GIS dataset schema where both <em>null</em> and <em>empty</em> geometries are excluded.  It is plausible that GIS professionals that are not familiar with <em>null</em> and <em>empty</em> shapes are ignorant of them when using a GIS where they are permitted.  This is a situation that confronted the proponent of this project.  Examples of miss-understanding of <em>null</em> and <em>empty</em> geometry values are widespread on the world wide web.  For example, although the coordinates of a <em>null</em> geometry are unknown, an article published by ESRI incorrectly states that <em>an empty geometry exists for any geometry where the coordinates are unknown</em> <a class="reference internal" href="changelog.html#esrinulloracle" id="id25">[2]</a>.</p>
<p>Micosoft SQL server and PostGis both permit <em>null</em> and <em>empty</em> geometry values unless explicitly excluded by constraints or third party software.  Even when a primary dataset contains no <em>null</em> or <em>empty</em> geometry values, processing of that dataset may produce <em>null</em> or <em>empty</em> geometry values.  Performing set operations like intersections using database methods, and, editing geometry of specific records within QGIS are two ways <em>empty</em> geometry values can be created.</p>
<div class="section" id="exposing-null-or-empty-geometry-values-in-qgis">
<h3>Exposing null or Empty Geometry Values in QGIS<a class="headerlink" href="#exposing-null-or-empty-geometry-values-in-qgis" title="Permalink to this headline">¶</a></h3>
<p>Within QGIS, without using custom expressions or scripts there are only limited scenarios where a user will be alerted to <em>null</em> or <em>empty</em> geometry values when they are present.  Two tools within QGIS where you may find descriptive information of each record are the <em>“Attribute Table”</em> and the <em>“DB Manager”</em> plugin.</p>
<p>Without using expressions and creating new attributes, the “Attribute Table” does not contain any information about a record’s geometry.  The only component of the “Attribute Table” that exposes <em>empty</em> or <em>null</em> geometries is when a user selects <em>“Zoom to Feature”</em> for a specific record that has a <em>null</em> or empty geometry.  In QGIS version 3.x, a warning message is shown on the map canvas when a user attempts to zoom to a feature with an <em>empty</em> or <em>null</em> geometry (<a class="reference internal" href="#figureiii"><span class="std std-numref">Fig. 9</span></a>).</p>
<div class="figure align-center" id="id43">
<span id="figureiii"></span><a class="reference internal image-reference" href="_images/FigureII.png"><img alt="_images/FigureII.png" src="_images/FigureII.png" style="width: 802.9px; height: 476.7px;" /></a>
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">A warning message is displayed in QGIS when a user attempts to zoom to a record with an <em>empty</em> geometry.</span></p>
</div>
<p>The DB Manager in QGIS 3.x is a core plugin (it can’t be uninstalled).  The DB Manager plugin provides database specific information for data sets from a limited number of database sources that includes PostGIS, but, excludes Microsoft SQL Server.  The <em>“Table”</em> view within DB Manager shows all of the columns within the table including the geometry attribute.  Within the geometry column it gives the geometry type and exposes <em>null</em> geometries as <em>“NULL”</em> (<a class="reference internal" href="#figureiv"><span class="std std-numref">Fig. 10</span></a>).  In contrast, <em>empty</em> geometries are referred to by their geometry type.  Note that the DB Manager’s approach is theoretically correct as <em>null</em> geometries have an unknown geomtry type, whilst <em>empty</em> geometries have a known geometry type.</p>
<div class="figure align-center" id="id44">
<span id="figureiv"></span><a class="reference internal image-reference" href="_images/FigureIII.png"><img alt="_images/FigureIII.png" src="_images/FigureIII.png" style="width: 537.5999999999999px; height: 326.9px;" /></a>
<p class="caption"><span class="caption-number">Fig. 10 </span><span class="caption-text">The output from the DB Manager plugin in QGIS 3.x for a dataset that contains both <em>empty</em> and <em>null</em> geometry values.</span></p>
</div>
<table class="docutils footnote" frame="void" id="fi" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[1]</a></td><td>In many SQL databases there are duplicate hierarchy’s with separate geometry data types for cartesian and geographic coordinates.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[2]</a></td><td>In both Microsoft SQL server and PostGis the geometry type that is <em>empty</em> is recorded <a class="reference internal" href="changelog.html#loskot2010" id="id26">[20]</a><a class="reference internal" href="changelog.html#ramsey2010" id="id27">[22]</a>).  Sometimes the geometry type gets changed to the generic ‘GEOMETRYCOLLECTION’ by set operations.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[3]</a></td><td>For SQL relational databases, the term geometry is restricted to those shapes that are located by cartesian coordinates.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[4]</a></td><td>Python uses <em>None</em> instead of <em>null</em>, but, PyQT uses <em>NULL</em> as a QVariant, so, PyQGIS scripts may have a mixture of <em>None</em> and <em>NULL</em> depending on the origin of the classes in use.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="QGISproblems.html" class="btn btn-neutral float-right" title="QGIS Data Provider Data Parsing Problems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Philip Whitten

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>